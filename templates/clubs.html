{% extends "layout.html" %}

{% block title %}
    Clubs
{% endblock %}

{% block main %}
    <div class="container">
        <form>
            <!-- to-do: fix sizing of button -->
            <div class="form-group">
                <input type="text" name="q" class="form-control" placeholder="Search">
            </div>
        </form>
        <div class="row">
            <!-- to-do: fix spacing of last row -->
            <!--{% for club in clubs %}-->
            <!--<div class="col">-->
            <!--    <div class="card" style="width: 18rem;">-->
            <!--        <div class="card-body">-->
            <!--            <h5 class="card-title">{{ club["name"] }}</h5>-->
            <!--            <h6 class="card-subtitle mb-2 text-muted">Category: {{ club["category"] }}</h6>-->
            <!--            <p class="card-text">{{ club["purpose"] }}</p>-->
            <!--            <a href="mailto:{{ club["email"] }}" class="card-link">{{ club["email"] }}</a>-->
                        <!-- <a href="#" class="card-link">Another link</a> -->
            <!--          </div>-->
            <!--    </div>-->
            <!--</div>-->
            <!--{% endfor %}-->
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>

        let input = document.querySelector('input');
        input.onkeyup = function() {
            $.get('/search?q=' + input.value, function(data) {
                let html='';
                for (club of data) {
                    html += '<div class="col"><div class="card" style="width: 18rem;"><div class="card-body"><h5 class="card-title">' + club["name"] +'</h5><h6 class="card-subtitle mb-2 text-muted">Category: ' + club["category"] + '</h6><p class="card-text">' + club["purpose"] + '</p><a href="mailto:'+ club["email"] + '" class="card-link"> ' + club["email"] + '</a></div></div></div>'
                }
                document.querySelector('div').innerHTML = html;
            });
        };

    </script>
{% endblock %}